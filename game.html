<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>5 10 Game - Round</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

    const firebaseConfig = {
  apiKey: "AIzaSyDyFEEoPZh7DcbFPIy9yXcM_DhoCmRnfFs",
  authDomain: "fiveten-5c5b6.firebaseapp.com",
  databaseURL: "https://fiveten-5c5b6-default-rtdb.firebaseio.com",
  projectId: "fiveten-5c5b6",
  storageBucket: "fiveten-5c5b6.appspot.com",
  messagingSenderId: "144708772155",
  appId: "1:144708772155:web:df5f00b87112c54985d71e"
};

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const startGameRef = ref(db, 'game/startGameClicked');

    document.addEventListener("DOMContentLoaded", () => {
      const startGameButton = document.getElementById("startGame");
      const track1 = document.getElementById("track1");
      const track2 = document.getElementById("track2");
      const track3 = document.getElementById("track3");
      const track6 = document.getElementById("track6");

     // Set the initial value to false
  set(startGameRef, false).catch((error) => {
    console.error("Error setting initial value:", error);
  });
   

      startGameButton.addEventListener("click", () => {
        set(startGameRef, true); // Set the game state in Firebase
        startGameButton.style.display = "none"; // Hide the button
      });

      onValue(startGameRef, (snapshot) => {
        if (snapshot.val()) {
          // Play audio tracks only when the state changes
          playTracks();
        }
      });
    });

    function playTracks() {
      const track1 = document.getElementById("track1");
      const track2 = document.getElementById("track2");
      const track3 = document.getElementById("track3");
      const track6 = document.getElementById("track6");

      track1.play();
      track2.play();

      track1.onended = () => {
        track3.play();
      };

      track3.onended = () => {
        track6.play();
        track6.onended = () => {
          window.location.href = 'scoreboard.html'; // Redirect after last track
        };
      };
    }
  </script>
</head>
<body>
  <div class="container text-center mt-5">
    <h1>Round in Progress</h1>
    <h2>Round <span id="currentRound"></span> of 10</h2>
    <div class="mb-4">
      <p>Play Rock-Paper-Scissors to determine who starts first!</p>
       <img src="https://www.google.com/imgres?q=8%20bit%20rock%20paper%20sicors&imgurl=https%3A%2F%2Fst2.depositphotos.com%2F1340907%2F8260%2Fv%2F950%2Fdepositphotos_82602614-stock-illustration-rock-paper-scissors.jpg&imgrefurl=https%3A%2F%2Fdepositphotos.com%2Fvector%2Frock-paper-scissors-82602614.html&docid=TUTncykrrIcumM&tbnid=Ouelyl_s6hEr0M&vet=12ahUKEwiZvdujpbGLAxViODQIHU67EfwQM3oECBwQAA..i&w=1023&h=625&hcb=2&ved=2ahUKEwiZvdujpbGLAxViODQIHU67EfwQM3oECBwQAA" alt="rock paper peace"> </img>
      <button class="btn btn-primary btn-custom" id="startGame">Start Game</button>
    </div>
    <div class="mb-4">
      <h2>Tap once after each round</h2>
      <button class="btn btn-success btn-custom" onclick="document.getElementById('track4').play()">I Won</button>
      <button class="btn btn-danger btn-custom" onclick="document.getElementById('track5').play()">I Lost</button>
    </div>
  </div>

  <audio id="track1">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/Kendrick%20Lamariokart.mp3">
  </audio>
  <audio id="track2">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/Mario%20Kart%20Race%20Start%20-%20Sound%20Effect%20(HD)(MP3_160K).mp3.mp3" type="audio/mpeg">
  </audio>
  <audio id="track3">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/rickroll%20but%20it's%20my%20cover%20so%20you%20won't%20recognize%20the%20URL%20[5-N163].mp3" type="audio/mpeg">
  </audio>
  <audio id="track4">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/071%20.%20Tiktok%20Sound%20Effect%20--%20Mario%201%20Up.mp3" type="audio/mpeg">
  </audio>
  <audio id="track5">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/Mario%20Death%20-%20Sound%20Effect%20(HD)_1734727344368.mp3.mp3" type="audio/mpeg">
  </audio>
  <audio id="track6">
    <source src="https://raw.githubusercontent.com/aceuh1/aceuh5.github.io/main/Mario%20Kart%20(Race%20End)%20-%20Sound%20Effect%20(HD)(MP3_160K).mp3.mp3" type="audio/mpeg">
  </audio>

  <script>
    const currentRound = localStorage.getItem('currentRound') || 1;
    document.getElementById('currentRound').textContent = currentRound;
  </script>
</body>
</html>
